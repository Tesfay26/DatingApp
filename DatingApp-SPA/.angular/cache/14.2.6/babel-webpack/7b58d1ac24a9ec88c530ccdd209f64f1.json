{"ast":null,"code":"import { EventEmitter, Injector, ElementRef, TemplateRef, ɵɵdefineInjectable, ɵɵinject, ComponentFactoryResolver, NgZone, INJECTOR, ApplicationRef, Injectable } from '@angular/core';\nimport { listenToTriggersV2, registerOutsideClick, registerEscClick } from 'ngx-bootstrap/utils';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ngx-bootstrap/positioning';\n\nclass BsComponentRef {}\n/**\n * @copyright Valor Software\n * @copyright Angular ng-bootstrap team\n */\n\n\nclass ContentRef {\n  constructor( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  nodes, viewRef, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  componentRef) {\n    this.nodes = nodes;\n    this.viewRef = viewRef;\n    this.componentRef = componentRef;\n  }\n\n} // todo: add delay support\n\n\nclass ComponentLoader {\n  /**\n   * Do not use this directly, it should be instanced via\n   * `ComponentLoadFactory.attach`\n   * @internal\n   */\n  constructor(_viewContainerRef, _renderer, _elementRef, _injector, _componentFactoryResolver, _ngZone, _applicationRef, _posService) {\n    this._viewContainerRef = _viewContainerRef;\n    this._renderer = _renderer;\n    this._elementRef = _elementRef;\n    this._injector = _injector;\n    this._componentFactoryResolver = _componentFactoryResolver;\n    this._ngZone = _ngZone;\n    this._applicationRef = _applicationRef;\n    this._posService = _posService;\n    this.onBeforeShow = new EventEmitter();\n    this.onShown = new EventEmitter();\n    this.onBeforeHide = new EventEmitter();\n    this.onHidden = new EventEmitter();\n    this._providers = [];\n    this._isHiding = false;\n    /**\n     * A selector used if container element was not found\n     */\n\n    this.containerDefaultSelector = 'body';\n    this._listenOpts = {};\n    this._globalListener = Function.prototype;\n  }\n\n  get isShown() {\n    if (this._isHiding) {\n      return false;\n    }\n\n    return !!this._componentRef;\n  }\n\n  attach(compType) {\n    this._componentFactory = this._componentFactoryResolver.resolveComponentFactory(compType);\n    return this;\n  } // todo: add behaviour: to target element, `body`, custom element\n\n\n  to(container) {\n    this.container = container || this.container;\n    return this;\n  }\n\n  position(opts) {\n    if (!opts) {\n      return this;\n    }\n\n    this.attachment = opts.attachment || this.attachment;\n    this._elementRef = opts.target || this._elementRef;\n    return this;\n  }\n\n  provide(provider) {\n    this._providers.push(provider);\n\n    return this;\n  } // todo: appendChild to element or document.querySelector(this.container)\n\n\n  show(opts = {}) {\n    this._subscribePositioning();\n\n    this._innerComponent = void 0;\n\n    if (!this._componentRef) {\n      this.onBeforeShow.emit();\n      this._contentRef = this._getContentRef(opts.content, opts.context, opts.initialState);\n      const injector = Injector.create({\n        providers: this._providers,\n        parent: this._injector\n      });\n\n      if (!this._componentFactory) {\n        return;\n      }\n\n      this._componentRef = this._componentFactory.create(injector, this._contentRef.nodes);\n\n      this._applicationRef.attachView(this._componentRef.hostView); // this._componentRef = this._viewContainerRef\n      //   .createComponent(this._componentFactory, 0, injector, this._contentRef.nodes);\n\n\n      this.instance = this._componentRef.instance;\n      Object.assign(this._componentRef.instance, opts);\n\n      if (this.container instanceof ElementRef) {\n        this.container.nativeElement.appendChild(this._componentRef.location.nativeElement);\n      }\n\n      if (typeof this.container === 'string' && typeof document !== 'undefined') {\n        const selectedElement = document.querySelector(this.container) || document.querySelector(this.containerDefaultSelector);\n\n        if (!selectedElement) {\n          return;\n        }\n\n        selectedElement.appendChild(this._componentRef.location.nativeElement);\n      }\n\n      if (!this.container && this._elementRef && this._elementRef.nativeElement.parentElement) {\n        this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement);\n      } // we need to manually invoke change detection since events registered\n      // via\n      // Renderer::listen() are not picked up by change detection with the\n      // OnPush strategy\n\n\n      if (this._contentRef.componentRef) {\n        this._innerComponent = this._contentRef.componentRef.instance;\n\n        this._contentRef.componentRef.changeDetectorRef.markForCheck();\n\n        this._contentRef.componentRef.changeDetectorRef.detectChanges();\n      }\n\n      this._componentRef.changeDetectorRef.markForCheck();\n\n      this._componentRef.changeDetectorRef.detectChanges();\n\n      this.onShown.emit(opts.id ? {\n        id: opts.id\n      } : this._componentRef.instance);\n    }\n\n    this._registerOutsideClick();\n\n    return this._componentRef;\n  }\n\n  hide(id) {\n    var _a, _b, _c;\n\n    if (!this._componentRef) {\n      return this;\n    }\n\n    this._posService.deletePositionElement(this._componentRef.location);\n\n    this.onBeforeHide.emit(this._componentRef.instance);\n    const componentEl = this._componentRef.location.nativeElement;\n    componentEl.parentNode.removeChild(componentEl);\n\n    if ((_a = this._contentRef) === null || _a === void 0 ? void 0 : _a.componentRef) {\n      this._contentRef.componentRef.destroy();\n    }\n\n    if (this._viewContainerRef && ((_b = this._contentRef) === null || _b === void 0 ? void 0 : _b.viewRef)) {\n      this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef));\n    }\n\n    if ((_c = this._contentRef) === null || _c === void 0 ? void 0 : _c.viewRef) {\n      this._contentRef.viewRef.destroy();\n    }\n\n    this._contentRef = void 0;\n    this._componentRef = void 0;\n\n    this._removeGlobalListener();\n\n    this.onHidden.emit(id ? {\n      id\n    } : null);\n    return this;\n  }\n\n  toggle() {\n    if (this.isShown) {\n      this.hide();\n      return;\n    }\n\n    this.show();\n  }\n\n  dispose() {\n    if (this.isShown) {\n      this.hide();\n    }\n\n    this._unsubscribePositioning();\n\n    if (this._unregisterListenersFn) {\n      this._unregisterListenersFn();\n    }\n  }\n\n  listen(listenOpts) {\n    var _a;\n\n    this.triggers = listenOpts.triggers || this.triggers;\n    this._listenOpts.outsideClick = listenOpts.outsideClick;\n    this._listenOpts.outsideEsc = listenOpts.outsideEsc;\n    listenOpts.target = listenOpts.target || ((_a = this._elementRef) === null || _a === void 0 ? void 0 : _a.nativeElement);\n\n    const hide = this._listenOpts.hide = () => listenOpts.hide ? listenOpts.hide() : void this.hide();\n\n    const show = this._listenOpts.show = registerHide => {\n      listenOpts.show ? listenOpts.show(registerHide) : this.show(registerHide);\n      registerHide();\n    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    const toggle = registerHide => {\n      this.isShown ? hide() : show(registerHide);\n    };\n\n    if (this._renderer) {\n      this._unregisterListenersFn = listenToTriggersV2(this._renderer, {\n        target: listenOpts.target,\n        triggers: listenOpts.triggers,\n        show,\n        hide,\n        toggle\n      });\n    }\n\n    return this;\n  }\n\n  _removeGlobalListener() {\n    if (this._globalListener) {\n      this._globalListener();\n\n      this._globalListener = Function.prototype;\n    }\n  }\n\n  attachInline(vRef, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  template) {\n    if (vRef && template) {\n      this._inlineViewRef = vRef.createEmbeddedView(template);\n    }\n\n    return this;\n  }\n\n  _registerOutsideClick() {\n    if (!this._componentRef || !this._componentRef.location) {\n      return;\n    } // why: should run after first event bubble\n\n\n    if (this._listenOpts.outsideClick) {\n      const target = this._componentRef.location.nativeElement;\n      setTimeout(() => {\n        if (this._renderer && this._elementRef) {\n          this._globalListener = registerOutsideClick(this._renderer, {\n            targets: [target, this._elementRef.nativeElement],\n            outsideClick: this._listenOpts.outsideClick,\n            hide: () => this._listenOpts.hide && this._listenOpts.hide()\n          });\n        }\n      });\n    }\n\n    if (this._listenOpts.outsideEsc && this._renderer && this._elementRef) {\n      const target = this._componentRef.location.nativeElement;\n      this._globalListener = registerEscClick(this._renderer, {\n        targets: [target, this._elementRef.nativeElement],\n        outsideEsc: this._listenOpts.outsideEsc,\n        hide: () => this._listenOpts.hide && this._listenOpts.hide()\n      });\n    }\n  }\n\n  getInnerComponent() {\n    return this._innerComponent;\n  }\n\n  _subscribePositioning() {\n    if (this._zoneSubscription || !this.attachment) {\n      return;\n    }\n\n    this.onShown.subscribe(() => {\n      var _a;\n\n      this._posService.position({\n        element: (_a = this._componentRef) === null || _a === void 0 ? void 0 : _a.location,\n        target: this._elementRef,\n        attachment: this.attachment,\n        appendToBody: this.container === 'body'\n      });\n    });\n    this._zoneSubscription = this._ngZone.onStable.subscribe(() => {\n      if (!this._componentRef) {\n        return;\n      }\n\n      this._posService.calcPosition();\n    });\n  }\n\n  _unsubscribePositioning() {\n    if (!this._zoneSubscription) {\n      return;\n    }\n\n    this._zoneSubscription.unsubscribe();\n\n    this._zoneSubscription = void 0;\n  }\n\n  _getContentRef( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  content, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  context, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  initialState) {\n    if (!content) {\n      return new ContentRef([]);\n    }\n\n    if (content instanceof TemplateRef) {\n      if (this._viewContainerRef) {\n        const _viewRef = this._viewContainerRef.createEmbeddedView(content, context);\n\n        _viewRef.markForCheck();\n\n        return new ContentRef([_viewRef.rootNodes], _viewRef);\n      }\n\n      const viewRef = content.createEmbeddedView({});\n\n      this._applicationRef.attachView(viewRef);\n\n      return new ContentRef([viewRef.rootNodes], viewRef);\n    }\n\n    if (typeof content === 'function') {\n      const contentCmptFactory = this._componentFactoryResolver.resolveComponentFactory(content);\n\n      const modalContentInjector = Injector.create({\n        providers: this._providers,\n        parent: this._injector\n      });\n      const componentRef = contentCmptFactory.create(modalContentInjector);\n      Object.assign(componentRef.instance, initialState);\n\n      this._applicationRef.attachView(componentRef.hostView);\n\n      return new ContentRef([[componentRef.location.nativeElement]], componentRef.hostView, componentRef);\n    }\n\n    const nodes = this._renderer ? [this._renderer.createText(`${content}`)] : [];\n    return new ContentRef([nodes]);\n  }\n\n}\n\nclass ComponentLoaderFactory {\n  constructor(_componentFactoryResolver, _ngZone, _injector, _posService, _applicationRef) {\n    this._componentFactoryResolver = _componentFactoryResolver;\n    this._ngZone = _ngZone;\n    this._injector = _injector;\n    this._posService = _posService;\n    this._applicationRef = _applicationRef;\n  }\n  /**\n   *\n   * @param _elementRef\n   * @param _viewContainerRef\n   * @param _renderer\n   */\n\n\n  createLoader(_elementRef, _viewContainerRef, _renderer) {\n    return new ComponentLoader(_viewContainerRef, _renderer, _elementRef, this._injector, this._componentFactoryResolver, this._ngZone, this._applicationRef, this._posService);\n  }\n\n}\n\nComponentLoaderFactory.ɵfac = function ComponentLoaderFactory_Factory(t) {\n  return new (t || ComponentLoaderFactory)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc1.PositioningService), ɵngcc0.ɵɵinject(ɵngcc0.ApplicationRef));\n};\n\nComponentLoaderFactory.ɵprov = ɵɵdefineInjectable({\n  factory: function ComponentLoaderFactory_Factory() {\n    return new ComponentLoaderFactory(ɵɵinject(ComponentFactoryResolver), ɵɵinject(NgZone), ɵɵinject(INJECTOR), ɵɵinject(PositioningService), ɵɵinject(ApplicationRef));\n  },\n  token: ComponentLoaderFactory,\n  providedIn: \"root\"\n});\n\nComponentLoaderFactory.ctorParameters = () => [{\n  type: ComponentFactoryResolver\n}, {\n  type: NgZone\n}, {\n  type: Injector\n}, {\n  type: PositioningService\n}, {\n  type: ApplicationRef\n}];\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ComponentLoaderFactory, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ComponentFactoryResolver\n    }, {\n      type: ɵngcc0.NgZone\n    }, {\n      type: ɵngcc0.Injector\n    }, {\n      type: ɵngcc1.PositioningService\n    }, {\n      type: ɵngcc0.ApplicationRef\n    }];\n  }, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { BsComponentRef, ComponentLoader, ComponentLoaderFactory, ContentRef };","map":{"version":3,"sources":["F:/projects/DatingApp/DatingApp-SPA/node_modules/ngx-bootstrap/__ivy_ngcc__/component-loader/fesm2015/ngx-bootstrap-component-loader.js"],"names":["EventEmitter","Injector","ElementRef","TemplateRef","ɵɵdefineInjectable","ɵɵinject","ComponentFactoryResolver","NgZone","INJECTOR","ApplicationRef","Injectable","listenToTriggersV2","registerOutsideClick","registerEscClick","PositioningService","ɵngcc0","ɵngcc1","BsComponentRef","ContentRef","constructor","nodes","viewRef","componentRef","ComponentLoader","_viewContainerRef","_renderer","_elementRef","_injector","_componentFactoryResolver","_ngZone","_applicationRef","_posService","onBeforeShow","onShown","onBeforeHide","onHidden","_providers","_isHiding","containerDefaultSelector","_listenOpts","_globalListener","Function","prototype","isShown","_componentRef","attach","compType","_componentFactory","resolveComponentFactory","to","container","position","opts","attachment","target","provide","provider","push","show","_subscribePositioning","_innerComponent","emit","_contentRef","_getContentRef","content","context","initialState","injector","create","providers","parent","attachView","hostView","instance","Object","assign","nativeElement","appendChild","location","document","selectedElement","querySelector","parentElement","changeDetectorRef","markForCheck","detectChanges","id","_registerOutsideClick","hide","_a","_b","_c","deletePositionElement","componentEl","parentNode","removeChild","destroy","remove","indexOf","_removeGlobalListener","toggle","dispose","_unsubscribePositioning","_unregisterListenersFn","listen","listenOpts","triggers","outsideClick","outsideEsc","registerHide","attachInline","vRef","template","_inlineViewRef","createEmbeddedView","setTimeout","targets","getInnerComponent","_zoneSubscription","subscribe","element","appendToBody","onStable","calcPosition","unsubscribe","_viewRef","rootNodes","contentCmptFactory","modalContentInjector","createText","ComponentLoaderFactory","createLoader","ɵfac","ComponentLoaderFactory_Factory","t","ɵprov","factory","token","providedIn","ctorParameters","type","ngDevMode","ɵsetClassMetadata","args"],"mappings":"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","sourcesContent":["import { EventEmitter, Injector, ElementRef, TemplateRef, ɵɵdefineInjectable, ɵɵinject, ComponentFactoryResolver, NgZone, INJECTOR, ApplicationRef, Injectable } from '@angular/core';\nimport { listenToTriggersV2, registerOutsideClick, registerEscClick } from 'ngx-bootstrap/utils';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ngx-bootstrap/positioning';\nclass BsComponentRef {\n}\n\n/**\n * @copyright Valor Software\n * @copyright Angular ng-bootstrap team\n */\nclass ContentRef {\n    constructor(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    nodes, viewRef, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    componentRef) {\n        this.nodes = nodes;\n        this.viewRef = viewRef;\n        this.componentRef = componentRef;\n    }\n}\n\n// todo: add delay support\nclass ComponentLoader {\n    /**\n     * Do not use this directly, it should be instanced via\n     * `ComponentLoadFactory.attach`\n     * @internal\n     */\n    constructor(_viewContainerRef, _renderer, _elementRef, _injector, _componentFactoryResolver, _ngZone, _applicationRef, _posService) {\n        this._viewContainerRef = _viewContainerRef;\n        this._renderer = _renderer;\n        this._elementRef = _elementRef;\n        this._injector = _injector;\n        this._componentFactoryResolver = _componentFactoryResolver;\n        this._ngZone = _ngZone;\n        this._applicationRef = _applicationRef;\n        this._posService = _posService;\n        this.onBeforeShow = new EventEmitter();\n        this.onShown = new EventEmitter();\n        this.onBeforeHide = new EventEmitter();\n        this.onHidden = new EventEmitter();\n        this._providers = [];\n        this._isHiding = false;\n        /**\n         * A selector used if container element was not found\n         */\n        this.containerDefaultSelector = 'body';\n        this._listenOpts = {};\n        this._globalListener = Function.prototype;\n    }\n    get isShown() {\n        if (this._isHiding) {\n            return false;\n        }\n        return !!this._componentRef;\n    }\n    attach(compType) {\n        this._componentFactory = this._componentFactoryResolver\n            .resolveComponentFactory(compType);\n        return this;\n    }\n    // todo: add behaviour: to target element, `body`, custom element\n    to(container) {\n        this.container = container || this.container;\n        return this;\n    }\n    position(opts) {\n        if (!opts) {\n            return this;\n        }\n        this.attachment = opts.attachment || this.attachment;\n        this._elementRef = opts.target || this._elementRef;\n        return this;\n    }\n    provide(provider) {\n        this._providers.push(provider);\n        return this;\n    }\n    // todo: appendChild to element or document.querySelector(this.container)\n    show(opts = {}) {\n        this._subscribePositioning();\n        this._innerComponent = void 0;\n        if (!this._componentRef) {\n            this.onBeforeShow.emit();\n            this._contentRef = this._getContentRef(opts.content, opts.context, opts.initialState);\n            const injector = Injector.create({\n                providers: this._providers,\n                parent: this._injector\n            });\n            if (!this._componentFactory) {\n                return;\n            }\n            this._componentRef = this._componentFactory.create(injector, this._contentRef.nodes);\n            this._applicationRef.attachView(this._componentRef.hostView);\n            // this._componentRef = this._viewContainerRef\n            //   .createComponent(this._componentFactory, 0, injector, this._contentRef.nodes);\n            this.instance = this._componentRef.instance;\n            Object.assign(this._componentRef.instance, opts);\n            if (this.container instanceof ElementRef) {\n                this.container.nativeElement.appendChild(this._componentRef.location.nativeElement);\n            }\n            if (typeof this.container === 'string' && typeof document !== 'undefined') {\n                const selectedElement = document.querySelector(this.container) ||\n                    document.querySelector(this.containerDefaultSelector);\n                if (!selectedElement) {\n                    return;\n                }\n                selectedElement.appendChild(this._componentRef.location.nativeElement);\n            }\n            if (!this.container &&\n                this._elementRef &&\n                this._elementRef.nativeElement.parentElement) {\n                this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement);\n            }\n            // we need to manually invoke change detection since events registered\n            // via\n            // Renderer::listen() are not picked up by change detection with the\n            // OnPush strategy\n            if (this._contentRef.componentRef) {\n                this._innerComponent = this._contentRef.componentRef.instance;\n                this._contentRef.componentRef.changeDetectorRef.markForCheck();\n                this._contentRef.componentRef.changeDetectorRef.detectChanges();\n            }\n            this._componentRef.changeDetectorRef.markForCheck();\n            this._componentRef.changeDetectorRef.detectChanges();\n            this.onShown.emit(opts.id ? { id: opts.id } : this._componentRef.instance);\n        }\n        this._registerOutsideClick();\n        return this._componentRef;\n    }\n    hide(id) {\n        var _a, _b, _c;\n        if (!this._componentRef) {\n            return this;\n        }\n        this._posService.deletePositionElement(this._componentRef.location);\n        this.onBeforeHide.emit(this._componentRef.instance);\n        const componentEl = this._componentRef.location.nativeElement;\n        componentEl.parentNode.removeChild(componentEl);\n        if ((_a = this._contentRef) === null || _a === void 0 ? void 0 : _a.componentRef) {\n            this._contentRef.componentRef.destroy();\n        }\n        if (this._viewContainerRef && ((_b = this._contentRef) === null || _b === void 0 ? void 0 : _b.viewRef)) {\n            this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef));\n        }\n        if ((_c = this._contentRef) === null || _c === void 0 ? void 0 : _c.viewRef) {\n            this._contentRef.viewRef.destroy();\n        }\n        this._contentRef = void 0;\n        this._componentRef = void 0;\n        this._removeGlobalListener();\n        this.onHidden.emit(id ? { id } : null);\n        return this;\n    }\n    toggle() {\n        if (this.isShown) {\n            this.hide();\n            return;\n        }\n        this.show();\n    }\n    dispose() {\n        if (this.isShown) {\n            this.hide();\n        }\n        this._unsubscribePositioning();\n        if (this._unregisterListenersFn) {\n            this._unregisterListenersFn();\n        }\n    }\n    listen(listenOpts) {\n        var _a;\n        this.triggers = listenOpts.triggers || this.triggers;\n        this._listenOpts.outsideClick = listenOpts.outsideClick;\n        this._listenOpts.outsideEsc = listenOpts.outsideEsc;\n        listenOpts.target = listenOpts.target || ((_a = this._elementRef) === null || _a === void 0 ? void 0 : _a.nativeElement);\n        const hide = (this._listenOpts.hide = () => listenOpts.hide ? listenOpts.hide() : void this.hide());\n        const show = (this._listenOpts.show = (registerHide) => {\n            listenOpts.show ? listenOpts.show(registerHide) : this.show(registerHide);\n            registerHide();\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const toggle = (registerHide) => {\n            this.isShown ? hide() : show(registerHide);\n        };\n        if (this._renderer) {\n            this._unregisterListenersFn = listenToTriggersV2(this._renderer, {\n                target: listenOpts.target,\n                triggers: listenOpts.triggers,\n                show,\n                hide,\n                toggle\n            });\n        }\n        return this;\n    }\n    _removeGlobalListener() {\n        if (this._globalListener) {\n            this._globalListener();\n            this._globalListener = Function.prototype;\n        }\n    }\n    attachInline(vRef, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    template) {\n        if (vRef && template) {\n            this._inlineViewRef = vRef.createEmbeddedView(template);\n        }\n        return this;\n    }\n    _registerOutsideClick() {\n        if (!this._componentRef || !this._componentRef.location) {\n            return;\n        }\n        // why: should run after first event bubble\n        if (this._listenOpts.outsideClick) {\n            const target = this._componentRef.location.nativeElement;\n            setTimeout(() => {\n                if (this._renderer && this._elementRef) {\n                    this._globalListener = registerOutsideClick(this._renderer, {\n                        targets: [target, this._elementRef.nativeElement],\n                        outsideClick: this._listenOpts.outsideClick,\n                        hide: () => this._listenOpts.hide && this._listenOpts.hide()\n                    });\n                }\n            });\n        }\n        if (this._listenOpts.outsideEsc && this._renderer && this._elementRef) {\n            const target = this._componentRef.location.nativeElement;\n            this._globalListener = registerEscClick(this._renderer, {\n                targets: [target, this._elementRef.nativeElement],\n                outsideEsc: this._listenOpts.outsideEsc,\n                hide: () => this._listenOpts.hide && this._listenOpts.hide()\n            });\n        }\n    }\n    getInnerComponent() {\n        return this._innerComponent;\n    }\n    _subscribePositioning() {\n        if (this._zoneSubscription || !this.attachment) {\n            return;\n        }\n        this.onShown.subscribe(() => {\n            var _a;\n            this._posService.position({\n                element: (_a = this._componentRef) === null || _a === void 0 ? void 0 : _a.location,\n                target: this._elementRef,\n                attachment: this.attachment,\n                appendToBody: this.container === 'body'\n            });\n        });\n        this._zoneSubscription = this._ngZone.onStable.subscribe(() => {\n            if (!this._componentRef) {\n                return;\n            }\n            this._posService.calcPosition();\n        });\n    }\n    _unsubscribePositioning() {\n        if (!this._zoneSubscription) {\n            return;\n        }\n        this._zoneSubscription.unsubscribe();\n        this._zoneSubscription = void 0;\n    }\n    _getContentRef(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    content, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    context, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    initialState) {\n        if (!content) {\n            return new ContentRef([]);\n        }\n        if (content instanceof TemplateRef) {\n            if (this._viewContainerRef) {\n                const _viewRef = this._viewContainerRef\n                    .createEmbeddedView(content, context);\n                _viewRef.markForCheck();\n                return new ContentRef([_viewRef.rootNodes], _viewRef);\n            }\n            const viewRef = content.createEmbeddedView({});\n            this._applicationRef.attachView(viewRef);\n            return new ContentRef([viewRef.rootNodes], viewRef);\n        }\n        if (typeof content === 'function') {\n            const contentCmptFactory = this._componentFactoryResolver.resolveComponentFactory(content);\n            const modalContentInjector = Injector.create({\n                providers: this._providers,\n                parent: this._injector\n            });\n            const componentRef = contentCmptFactory.create(modalContentInjector);\n            Object.assign(componentRef.instance, initialState);\n            this._applicationRef.attachView(componentRef.hostView);\n            return new ContentRef([[componentRef.location.nativeElement]], componentRef.hostView, componentRef);\n        }\n        const nodes = this._renderer\n            ? [this._renderer.createText(`${content}`)]\n            : [];\n        return new ContentRef([nodes]);\n    }\n}\n\nclass ComponentLoaderFactory {\n    constructor(_componentFactoryResolver, _ngZone, _injector, _posService, _applicationRef) {\n        this._componentFactoryResolver = _componentFactoryResolver;\n        this._ngZone = _ngZone;\n        this._injector = _injector;\n        this._posService = _posService;\n        this._applicationRef = _applicationRef;\n    }\n    /**\n     *\n     * @param _elementRef\n     * @param _viewContainerRef\n     * @param _renderer\n     */\n    createLoader(_elementRef, _viewContainerRef, _renderer) {\n        return new ComponentLoader(_viewContainerRef, _renderer, _elementRef, this._injector, this._componentFactoryResolver, this._ngZone, this._applicationRef, this._posService);\n    }\n}\nComponentLoaderFactory.ɵfac = function ComponentLoaderFactory_Factory(t) { return new (t || ComponentLoaderFactory)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc1.PositioningService), ɵngcc0.ɵɵinject(ɵngcc0.ApplicationRef)); };\nComponentLoaderFactory.ɵprov = ɵɵdefineInjectable({ factory: function ComponentLoaderFactory_Factory() { return new ComponentLoaderFactory(ɵɵinject(ComponentFactoryResolver), ɵɵinject(NgZone), ɵɵinject(INJECTOR), ɵɵinject(PositioningService), ɵɵinject(ApplicationRef)); }, token: ComponentLoaderFactory, providedIn: \"root\" });\nComponentLoaderFactory.ctorParameters = () => [\n    { type: ComponentFactoryResolver },\n    { type: NgZone },\n    { type: Injector },\n    { type: PositioningService },\n    { type: ApplicationRef }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ComponentLoaderFactory, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: ɵngcc0.ComponentFactoryResolver }, { type: ɵngcc0.NgZone }, { type: ɵngcc0.Injector }, { type: ɵngcc1.PositioningService }, { type: ɵngcc0.ApplicationRef }]; }, null); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BsComponentRef, ComponentLoader, ComponentLoaderFactory, ContentRef };\n\n"]},"metadata":{},"sourceType":"module"}